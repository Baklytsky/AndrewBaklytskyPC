{%- unless customer_name == blank and text == blank and subheading == blank -%}
  {%- if text_size != blank -%}
    {%- style -%}
      #brick-section--{{ section.id }} .testimonial__item--{{ block_id }} .testimonial__text { --adjust-body: calc(var(--FONT-ADJUST-BODY) * {{ text_size }}); }
    {%- endstyle -%}
  {%- endif -%}

  {%- if block_bg != 'rgba(0,0,0,0)' and block_bg != '' -%}
    {%- style -%}
      #Testimonials--{{ section.id }} .testimonial__item--{{ block_id }} .testimonial__item__inner { background: {{ block_bg }}; }
    {%- endstyle -%}
  {%- endif -%}

  <div class="testimonial__item testimonial__item--{{ block_id }} {{ block_color }}"
    data-item
    {{ block_shopify_attributes }}>
    <div class="testimonial__item__inner"
      {% if animations_enabled %}
        data-aos="fade-up"
        data-aos-anchor="{{ animation_anchor }}"
        data-aos-delay="{{ animation_delay }}"
        {%- assign animation_delay = animation_delay | plus: 150 -%}
      {% endif %}>
      <div class="testimonial__item__content">
        {%- unless star_rating == 0 -%}
          <div class="testimonial__stars"
            {% if animations_enabled %}
              data-aos="fade-up"
              data-aos-anchor="{{ animation_anchor }}"
              data-aos-delay="{{ animation_delay }}"
              {%- assign animation_delay = animation_delay | plus: 150 -%}
            {% endif %}>
            <span class="rating__star" aria-hidden="true" style="--percent: {{ 100 | minus: percent }}%">
              <span class="rating__star__empty">
                {%- for i in (1..5) -%}
                  [%- render 'partials/icon-star-empty' -%]
                {%- endfor -%}
              </span>

              <span class="rating__star__full">
                {%- for i in (1..5) -%}
                  [%- render 'partials/icon-star-full' -%]
                {%- endfor -%}
              </span>
            </span>
          </div>
        {%- endunless -%}

        <div class="testimonial__text"
          {% if animations_enabled %}
            data-aos="fade-up"
            data-aos-anchor="{{ animation_anchor }}"
            data-aos-delay="{{ animation_delay }}"
            {%- assign animation_delay = animation_delay | plus: 150 -%}
          {% endif %}>{{ text }}</div>

        {%- if customer_name != blank or subheading != blank -%}
          <div class="testimonial__user">
            {%- if image != blank -%}
              <div class="testimonial__user__image"
                {% if animations_enabled %}
                  data-aos="fade-up"
                  data-aos-anchor="{{ animation_anchor }}"
                  data-aos-delay="{{ animation_delay }}"
                {% endif %}>
                {%- liquid
                  assign animation_delay = animation_delay | plus: 150
                  assign image_alt = image.alt | escape
                  assign retina_size = image_width | times: 2
                  assign image_widths = image_width | append: ', ' | append: retina_size
                  assign sizes = 'min((100vw - 60px - 40px), ' | append: image_width | append: 'px' | append: ')'

                  capture styles
                    echo 'width: ' | append: image_width | append: 'px;'
                    echo 'height: ' | append: image_width | append: 'px;'
                  endcapture

                  render 'image', image: image, width: retina_size, height: retina_size, widths: image_widths, sizes: sizes, cover: false, alt: image_alt, styles: styles, classes: 'testimonial__user__image__img'
                -%}
              </div>
            {%- endif -%}

            {%- if customer_name != blank -%}
              <div class="testimonial__user__name"
                {% if animations_enabled %}
                  data-aos="fade-up"
                  data-aos-anchor="{{ animation_anchor }}"
                  data-aos-delay="{{ animation_delay }}"
                  {%- assign animation_delay = animation_delay | plus: 150 -%}
                {% endif %}>{{ customer_name | escape }}</div>
            {%- endif -%}

            {%- if subheading != blank -%}
              <div class="testimonial__subheading"
                {% if animations_enabled %}
                  data-aos="fade-up"
                  data-aos-anchor="{{ animation_anchor }}"
                  data-aos-delay="{{ animation_delay }}"
                {% endif %}>{{ subheading }}</div>
            {%- endif -%}
          </div>
        {%- endif -%}
      </div>
    </div>
  </div>
{%- endunless -%}