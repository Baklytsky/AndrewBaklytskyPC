/*=============== Section Columns ===============*/

.section-columns {
  display: flex;
  justify-content: center;
  overflow: hidden;
  color: var(--text);
  background-color: var(--bg);
}

.section-columns__wrapper,
.section-columns__slider .flickity-viewport { overflow: initial; }

.section-columns__slider .flickity-button { background: var(--bg); }

.section-columns__wrapper .grid--mobile,
.section-columns__wrapper .stacked--mobile {
  @include media-query ($small) {
    row-gap: calc(var(--gutter) / 2);
  }
}

.column-item {
  .stacked--mobile & {
    @include media-query ($small) {
      width: var(--wrapper-width);
    }
  }

  &:first-child:last-child {
    display: block;

    @include media-query ($medium-up) {
      width: calc(var(--wrapper-width) / 2);
      margin: 0 auto;
    }

    @include media-query ($small) {
      width: var(--wrapper-width);
      margin: 0;
    }
  }
}

.column-item--border {
  .carousel--resize & { min-height: 100%; }

  display: flex;
  flex-flow: column;
  justify-content: center;
  position: relative;

  &:after {
    position: absolute;
    top: 0;
    bottom: 0;
    right: calc(-1 * var(--grid-gutter) / 2);
    width: var(--BORDER-WIDTH);
    background: var(--border);
    content: '';
  }

  &[data-aos]:after {
    opacity: 0;
    top: 25%;
    bottom: 25%;
    transition: opacity 0.6s ease 0.15s, top 0.6s ease 0.15s, bottom 0.6s ease 0.15s;
  }

  .no-js &:after,
  &.aos-animate:after {
    opacity: 1;
    top: 0;
    bottom: 0;
  }

  &:last-child:after { display: none; }

  .column-item__inner { padding: 10px 0; }

  @include media-query ($small) {
    .section-columns__slider & { display: flex; }

    .stacked--mobile &:after {
      top: auto;
      bottom: calc(-1 * var(--gutter) / 4);
      left: 25%;
      right: 25%;
      width: auto;
      height: var(--BORDER-WIDTH);
    }

    .stacked--mobile &[data-aos]:after {
      left: 0;
      right: 0;
    }
    .stacked--mobile &.aos-animate:after {
      left: 25%;
      right: 25%;
    }

    .stacked--mobile &.column-item--image {
      margin-bottom: calc(var(--gutter) / 2);

      &:after { bottom: calc(-1 * var(--gutter) / 2); }
    }
    .carousel--resize.stacked--mobile &.column-item--image:after { bottom: 0; }
  }

  @media only screen and (min-width: #{$grid-mobile}) and (max-width: #{$grid-medium - 1}) {
    .grid--mobile &:nth-child(3n):after { display: none; }
  }

  @include media-query ($mobile) {
    .grid--mobile &:nth-child(2n):after { display: none; }
  }
}

.column-item--image {
  justify-content: flex-start;

  .column-item__inner { padding: 0; }
}

.column-item__image-wrapper {
  margin-bottom: calc(var(--gutter) / 2);
  position: relative;
  overflow: hidden;
}

.column-item__image {
  display: block;
  height: auto;
  position: relative;
  overflow: hidden;
  padding-top: var(--aspect-ratio);
  background-color: var(--bg);

  img,
  .placeholder-svg-filled {
    position: absolute;
    top: 0;
    left: 0;
  }
}

.column-item__video-link .play-button {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  opacity: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}

.column-item__content {
  p { margin: 0; }
  h3 { margin-bottom: 0.25em; }

  .text-left & { text-align: left; }
}
